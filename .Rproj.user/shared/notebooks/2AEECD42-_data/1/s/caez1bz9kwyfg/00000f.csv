"0","#Create the heatmap with correlation values"
"0",""
"0","#Assuming dataset_num is already defined and contains the relevant columns"
"0","cor_matrix <- cor(dataset_num %>%"
"0","                    select(""physical_act"", ""freq_alcohol"", ""obesity_lev"", ""age"", ""weight"",""height"", ""family_hist"", ""caloric_food"", ""vegetable_food"", ""food_btw_meals"", ""use_tech"", ""ch2o"", ""m_trans"", ""smoke"",""nb_meal_day"", ""calorie_check"", ""gender""), use = ""complete.obs"")"
"0",""
"0","#Extract the correlations with 'obesity_lev'"
"0","cor_with_obesity_lev <- cor_matrix[""obesity_lev"",]"
"0",""
"0","#Order variables by their correlation with 'obesity_lev'"
"0","ordered_vars <- names(sort(cor_with_obesity_lev, decreasing = TRUE))"
"0",""
"0","#Reorder the correlation matrix based on this order"
"0","cor_matrix_ordered <- cor_matrix[ordered_vars, ordered_vars]"
"0",""
"0","#Melt the ordered correlation matrix into long format"
"0","cor_long <- melt(cor_matrix_ordered)"
"0",""
"0","ggplot(cor_long, aes(x = Var1, y = Var2, fill = value)) +"
"0","  geom_tile() +"
"0","  geom_text(aes(label = round(value, 2)), color = ""black"", size = 2.5, vjust = 0.5, hjust = 0.5) + # Center text within tiles"
"0","  scale_fill_gradient2(low = ""blue"", mid = ""white"", high = ""red"", midpoint = 0) +"
"0","  labs(title = ""Correlation Heatmap Ordered by Obesity Level"", x = ""Variables"", y"
"0","       = ""Variables"") +"
"0","  theme_minimal() +"
"0","  theme(axis.text.x = element_text(angle = 45, hjust = 1), "
"0","        # Rotate x-axis labels for readability"
"0","        axis.text.y = element_text(angle = 45, vjust = 1) "
"0","        # Rotate y-axis labels for readability"
"0","  )"
